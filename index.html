<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./style.css">
        <title></title>
    </head>
    <body>
        <header>

        </header>
        <main>
            <div class="wrapper" id='main'>

            </div>
        </main>
        <footer>

        </footer>
        <script type="text/javascript">
            var keys = {
                '0': ['q','w','e','r','t','y','u','i','o','p'],
                '1': ['a','s','d','f','g','h','j','k','l'],
                '2': ['z','x','c','v','b','n','m'],
                'length': 3
            }
            var hash = {
                'q': 'qq.com',
                'w': 'weibo.com',
                'e': 'ele.me',
                'r': 'renren.com',
                't': 'tianya.com',
                'y': 'yahoo.cn',
                'u': 'uc.com',
                'i': 'iqiyi.com',
                'o': 'opera.com',
                'p': undefined,
                'a': 'acfun.tv',
                's': 'soho.com',
                'z': 'zhihu.com',
                'm': 'www.mcdonalds.com.cn'
            }
            var hashInLocalStorage = JSON.parse(localStorage.getItem('zzz') || 'null')
            if (hashInLocalStorage) {
                hash = hashInLocalStorage
            }
            index = 0
            while (index < keys['length']) {
                div = document.createElement('div')
                div.className = 'row'
                main.appendChild(div)
                row = keys[index]
                console.log(row)
                index2 = 0
                while (index2 < row.length) {
                    kbd = document.createElement('kbd')
                    span = document.createElement('span')
                    span.textContent = row[index2]
                    span.className = 'text'
                    kbd.appendChild(span)
                    kbd.className = 'key'
                    button = document.createElement('button')
                    button.textContent = '编辑'
                    button.id = row[index2]
                    img = document.createElement('img')
                    if (hash[row[index2]]) {
                        img.src = 'http://' + hash[row[index2]] + '/favicon.ico'
                    } else {
                        img.src = '//' + 'qq.com' + '/favicon.ico'
                    }
                    img.onerror = function(event) {
                        event.target.src = '//' + 'qq.com' + '/favicon.ico'
                    }
                    button.onclick = function(event) {
                        key = event['target']['id']
                        x = prompt('给我一个网址')
                        hash[key] = x
                        localStorage.setItem('zzz', JSON.stringify(hash))
                        console.log(hash)
                    }
                    kbd.appendChild(img)
                    kbd.appendChild(button)
                    div.appendChild(kbd)
                    index2 = index2 + 1
                }
                index = index + 1
            }
            document.onkeypress = function(kkk) {
                key = kkk['key']
                website = hash[key]
                // 当前地址栏里的地址
                // 模拟用户在地址栏输入
                // location.href = 'http://' + website
                window.open('http://' + website, '_blank')
            }
        </script>
    </body>
</html>
